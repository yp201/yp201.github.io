function initCanvas(){viewWidth=canvas.width=canvas.clientWidth,viewHeight=canvas.height=canvas.clientHeight,(ctx=canvas.getContext("2d")).scale(patternScaleX,patternScaleY)}function initGrain(){(patternCanvas=document.createElement("canvas")).width=patternSize,patternCanvas.height=patternSize,patternCtx=patternCanvas.getContext("2d"),patternData=patternCtx.createImageData(patternSize,patternSize)}function update(){for(var t,a=0;a<patternPixelDataLength;a+=4)t=255*Math.random()|0,patternData.data[a]=t,patternData.data[a+1]=t,patternData.data[a+2]=t,patternData.data[a+3]=patternAlpha;patternCtx.putImageData(patternData,0,0)}function draw(){ctx.clearRect(0,0,viewWidth,viewHeight),ctx.fillStyle=ctx.createPattern(patternCanvas,"repeat"),ctx.fillRect(0,0,viewWidth,viewHeight)}function loop(){++frame%patternRefreshInterval==0&&(update(),draw()),requestAnimationFrame(loop)}var viewWidth,viewHeight,canvas=document.getElementById("noise"),ctx,patternSize=64,patternScaleX=1,patternScaleY=1,patternRefreshInterval=6,patternAlpha=8,patternPixelDataLength=patternSize*patternSize*4,patternCanvas,patternCtx,patternData,frame=0;window.onload=function(){initCanvas(),initGrain(),requestAnimationFrame(loop)};
